
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ¥µè»Œè¡›æ˜Ÿç™¼å°„è¼‰å…· PSLV Neutron | Web 3D + AR</title>
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  <style>
    html, body { margin:0; height:100%; }
    model-viewer { width:100vw; height:100vh; display:block; }
    /* ç½®é ‚æŒ‰éˆ•åˆ—ï¼ˆä¸¦åˆ—ï¼‰ */
    #topBar{
      position: fixed; left:0; right:0;
      top: calc(8px + env(safe-area-inset-top, 0px));
      z-index: 10000; display:flex; justify-content:center; gap:10px;
      pointer-events: none;
    }
    .topBtn{
      pointer-events:auto;
      padding:10px 14px; border-radius:999px; border:1px solid #ddd;
      background:#111; color:#fff; text-decoration:none; font-size:14px;
      box-shadow:0 2px 10px rgba(0,0,0,.2);
    }
    .topBtn[disabled]{
      opacity:.5; cursor:not-allowed;
    }
    /* in-app æç¤ºï¼ˆLINE/FB å…§å»ºç€è¦½å™¨ï¼‰ */
    #inappTip{
      position:fixed; left:0; right:0; top:0;
      padding:10px; background:#fff3cd; border-bottom:1px solid #ffeeba;
      font-size:14px; text-align:center; z-index:10001; display:none;
    }
  </style>
</head>
<body>

  <!-- ç½®é ‚é›™æŒ‰éˆ•ï¼šAndroidï¼iOS ä¸¦åˆ— -->
  <div id="topBar">
    <button id="openARAndroid" class="topBtn">ğŸ¤– Android | AR</button>
    <a id="openARiOS" class="topBtn" rel="ar" target="_blank" href="model_ele.usdz">ğŸ“± iOS | AR</a>
  </div>
  <div id="inappTip">è«‹ç”¨ã€Œ Chrome/Safari é–‹å•Ÿã€å†è©¦ï¼ŒiOS AR åœ¨ LINE/FB å…§å»ºç€è¦½å™¨å¸¸ç„¡æ³•å•Ÿå‹•ã€‚</div>

  <model-viewer
    src="model_psl.glb"
    ios-src="model_psl.usdz"
    alt="PSLV"
    ar
    ar-modes="webxr scene-viewer quick-look"
    camera-controls
    auto-rotate
    shadow-intensity="1">
    <!-- ä¸å†ä½¿ç”¨ slot çš„é è¨­ AR æŒ‰éˆ•ï¼Œé¿å…ç•«é¢å¤šä¸€é¡†é™½æ˜¥æŒ‰éˆ• -->
  </model-viewer>

  <script>
    const mv = document.querySelector('model-viewer');
    const btnAndroid = document.getElementById('openARAndroid');
    const btnIOS = document.getElementById('openARiOS');

    // Android æŒ‰éˆ• â†’ ç›´æ¥è§¸ç™¼ model-viewer çš„ AR
    btnAndroid.addEventListener('click', () => {
      try { mv.activateAR(); } catch (e) { /* è£ç½®ä¸æ”¯æ´å°±ç„¡å‹•ä½œ */ }
    });

    // ç’°å¢ƒåµæ¸¬ï¼ˆåƒ…ç”¨ä¾†å•Ÿç”¨/åœç”¨æŒ‰éˆ•èˆ‡é¡¯ç¤ºæç¤ºï¼Œä¸æ”¹è®Šä½ çš„åŸæœ¬è¡Œç‚ºï¼‰
    const ua = navigator.userAgent;
    const isiOS = /iPhone|iPad|iPod/.test(ua);
    const isAndroid = /Android/i.test(ua);
    const inApp = /(Line|FBAV|FBAN|FBIOS|Instagram|GSA|Twitter|Snapchat)/i.test(ua);

    // è‹¥é Androidï¼Œå°‡ Android éˆ•è¨­ç‚º disabledï¼ˆé¿å… iOS é»äº†æ²’åæ‡‰ï¼‰
    if (!isAndroid) btnAndroid.setAttribute('disabled', 'true');
    // è‹¥é iOSï¼Œå¯æŠŠ iOS éˆ•ç°æ‰ï¼ˆä»å¯é»é–‹æª”æ¡ˆï¼Œä½†å¤šåŠæ²’ç”¨ï¼‰
    if (!isiOS) btnIOS.setAttribute('disabled', 'true');

    // in-app ç€è¦½å™¨é¡¯ç¤ºæç¤ºï¼ˆLINE/FBï¼‰
    if (inApp) document.getElementById('inappTip').style.display = 'block';
  </script>

</body>
</html>
